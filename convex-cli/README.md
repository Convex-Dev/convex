# Convex CLI

## Overview

The `convex-cli` module provides a CLI interface to Convex, including the ability to operate as either a client or peer on the Convex Network

## Usage Examples

### List available commands and options

```
convex --help
```

### Generating a key pair

To execute transactions or operate peers on Convex you will need a cryptographic Ed25519 key pair.

Key pairs are stored in a PKCS #12 key store. By default this is stored in the user's home directory in the location `~/.convex/keystore.pfx`. The keystore encrypts keys so that they cannot be accessed without the correct passwords.

To generate a cryptographic key, it is recommended to use the following command:

```
convex key generate
```

This generates and outputs a BIP39 mnemonic phrase of 12 words consistent with the BIP39 standard. The words will look something like this:

```
evidence expand family claw crack dawn name salmon resource leg once curious
```

You will be also prompted for three passwords:
- The key store password. This is needed to access all keys in the key store
- A BIP39 passphrase. This is the passphrase that will be used to generate the 
- A private key encryption password. This protects the new key generated

After the key is successfully generated, you will be able to use it providing you have the key store password and the private key password.

If the key is important to you, you will want to be able to recover it even if you permanently lose access to the key store (e.g. if your laptop is stolen, disk drive corrupted etc.). In tis case, you should make sure you securely record the following:
- The BIP39 mnemonic word list
- The BIP39 passphrase
 
### Importing a key pair

To re-import a key pair from a BIP39 seed, you can used the following command:

```
convex key import --type=bip39 --text='evidence expand family claw crack dawn name salmon resource leg once curious'
```

This will re-import the same key pair that was generated, assuming you have the correct BIP39 passphrase. You can confirm this by checking that the public key is the one you expect.

## Installation

### Pre-requisites

You need a reasonably modern version of Java, specifically 21+. You can get this here:
- [Java JDK from Oracle](https://www.oracle.com/uk/java/technologies/downloads/)

### .jar file

You need the `convex-cii.jar` file. Released versions can be downloaded here:
- https://mvnrepository.com/artifact/world.convex/convex-cli

The `convex-cli.jar` file can also be generated by running `mvn install` in the root directory of the convex project, in which case the built `.jar` file can be found at `convex-cli/target/convex-cli.jar`

At this point, assuming Java 21+ is correctly installed, you should simple be able to simply execute `java -jar convex-cli.jar`  (appending any appropriate CLI arguments).

### Convenience Wrappers

It is helpful to have a script or batch file which executes the Java command command for you so you can simply type `convex ....`

For Windows PowerShell, the following should work:

```
# Windows powershell - convex.ps1
java -jar path/to/convex-cli.jar $args
```

For Linux and other Unix-like systems:

```
#!/bin/bash
java -jar path/to/convex-cli.jar $@
```

Ensure the wrapper is somewhere in your `$PATH`, and you should be good to go!

## License

Copyright 2021-2024 The Convex Foundation and Contributors

Code in `convex-cli` is provided under the Convex Public License
